<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>CERAMICA XP 26 | Layout Profesional v6</title>
    
    <!-- FUENTES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        :root {
            /* --- VARIABLES BASE --- */
            /* Se sobrescriben dinámicamente vía JS */
            --w: 800px; 
            --h: 2800px;
            
            /* Colores Diseño */
            --bg: #F4F4F4; 
            --fg: #111111; 
            --accent: #E83234; 
            --text-on-accent: #FFFFFF;
            
            --line: rgba(0,0,0,0.1);
            --logo-filter: grayscale(100%) brightness(0); 
            
            --font-main: 'Work Sans', sans-serif;
            
            /* UI Colors (App Interface) */
            --ui-bg: #111111; 
            --ui-border: #333333;
            --ui-text: #ffffff;
        }

        /* --- RESET & ESTRUCTURA --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }

        body {
            background: #050505; 
            margin: 0; padding: 0; 
            height: 100dvh; width: 100vw;
            overflow: hidden; 
            /* ESTRUCTURA FLEX COLUMN: La clave para que no se solapen */
            display: flex; 
            flex-direction: column;
            font-family: var(--font-main);
        }

        /* --- 1. STAGE (ÁREA SUPERIOR - FLEXIBLE) --- */
        .stage-container {
            /* Ocupa todo el espacio sobrante (flex 1) */
            flex: 1; 
            width: 100%; 
            position: relative;
            display: flex; 
            align-items: center; 
            justify-content: center;
            overflow: hidden;
            
            /* Fondo técnico sutil */
            background-image: 
                linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            
            /* Padding para que el cartel no toque los bordes de la pantalla */
            padding: 20px; 
            
            /* Corrección para móviles antiguos */
            min-height: 0; 
        }

        /* --- EL CARTEL --- */
        #poster {
            /* Dimensiones forzadas por JS */
            width: var(--w) !important; 
            height: var(--h) !important;
            min-width: var(--w) !important; 
            min-height: var(--h) !important;
            
            background: var(--bg); 
            color: var(--fg);
            
            position: relative; 
            overflow: hidden;
            flex-shrink: 0; 
            
            /* Sombra suave */
            box-shadow: 0 20px 60px rgba(0,0,0,0.6);
            
            /* Animaciones */
            transition: 
                width 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), 
                height 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), 
                background-color 0.3s,
                color 0.3s;
            
            display: flex; 
            flex-direction: column;
            align-items: center;
            text-align: center;
            justify-content: space-between;
        }

        /* Trama de puntos decorativa */
        .bg-pattern {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: radial-gradient(var(--line) 2px, transparent 2px);
            background-size: 40px 40px; 
            pointer-events: none; z-index: 0;
        }

        /* --- ELEMENTOS DEL DISEÑO --- */
        
        /* Logo Superior */
        .top-brand {
            z-index: 10; width: 100%;
            display: flex; justify-content: center;
            flex: 0 0 auto; 
            padding-top: 0; 
        }
        .top-brand img {
            height: auto; width: auto;
            filter: var(--logo-filter);
            transition: height 0.3s;
        }

        /* Contenido Central */
        .main-content {
            z-index: 10;
            flex: 1; 
            display: flex; flex-direction: column;
            justify-content: center; 
            align-items: center;
            width: 100%;
            gap: 20px; 
        }

        .intro-text {
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 20px;
            border-bottom: 3px solid var(--fg);
            padding-bottom: 8px;
            display: inline-block;
        }

        .main-title {
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: -0.04em;
            margin: 0;
            line-height: 0.82; 
        }

        .info-block {
            display: flex; flex-direction: column; align-items: center;
        }

        .location {
            font-weight: 500;
            text-transform: uppercase;
            opacity: 0.85;
            margin-top: 15px;
        }

        .dates {
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: -0.03em;
            line-height: 1;
            margin-top: 5px;
        }

        .year-pill {
            background: var(--accent);
            color: var(--text-on-accent);
            font-weight: 800;
            border-radius: 100px;
            display: inline-flex;
            align-items: center; justify-content: center;
        }

        .showroom-info {
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-top: 4px solid var(--accent);
            padding-top: 15px;
            display: inline-block;
        }

        /* Footer Logos */
        .footer-logos {
            z-index: 10; width: 100%; flex: 0 0 auto;
            display: grid; grid-template-columns: repeat(2, 1fr); 
            align-items: center; justify-items: center;
        }
        
        .logo-wrapper { 
            width: 100%; display: flex; align-items: center; justify-content: center; 
        }
        .footer-logos img { 
            max-width: 100%; max-height: 100%; width: auto; height: auto; 
            object-fit: contain; 
            filter: var(--logo-filter); 
        }

        /* Ajustes Logos Específicos */
        .logo-ascale img { max-height: 85% !important; max-width: 85% !important; }
        .logo-natucer img { max-height: 80% !important; max-width: 80% !important; }


        /* =========================================
           REGLAS DE FORMATO (CLASES CSS)
           ========================================= */

        /* FORMATO: TOTEM XL (1200x4200) */
        .format-xl { padding: 80px 60px; }
        .format-xl .top-brand img { height: 95px; }
        .format-xl .intro-text { font-size: 38px; border-bottom-width: 3px; margin-bottom: 25px; }
        .format-xl .main-title { font-size: 100px; }
        .format-xl .info-block { gap: 20px; margin-top: 30px; }
        .format-xl .location { font-size: 32px; }
        .format-xl .dates { font-size: 84px; }
        .format-xl .year-pill { font-size: 68px; padding: 10px 110px; margin-top: 25px; margin-bottom: 40px; }
        .format-xl .showroom-info { font-size: 34px; min-width: 450px; padding-top: 25px; }
        .format-xl .footer-logos { grid-template-columns: repeat(2, 1fr); gap: 40px 20px; margin-top: 40px; }
        .format-xl .logo-wrapper { height: 65px; }

        /* FORMATO: A4 */
        .format-a4 { padding: 40px 30px; }
        .format-a4 .top-brand img { height: 50px; }
        .format-a4 .intro-text { font-size: 20px; border-bottom-width: 2px; margin-bottom: 15px; }
        .format-a4 .main-title { font-size: 56px; }
        .format-a4 .info-block { gap: 10px; margin-top: 10px; }
        .format-a4 .location { font-size: 18px; margin-top: 10px; }
        .format-a4 .dates { font-size: 48px; }
        .format-a4 .year-pill { font-size: 36px; padding: 5px 60px; margin-top: 15px; margin-bottom: 20px; }
        .format-a4 .showroom-info { font-size: 18px; min-width: 220px; padding-top: 12px; border-top-width: 2px; }
        .format-a4 .footer-logos { grid-template-columns: repeat(4, 1fr); gap: 20px; margin-top: 20px; }
        .format-a4 .logo-wrapper { height: 35px; }

        /* FORMATO: STORY (9:16) */
        .format-story { padding: 50px 30px; }
        .format-story .top-brand img { height: 45px; }
        .format-story .intro-text { font-size: 18px; border-bottom-width: 2px; margin-bottom: 10px; }
        .format-story .main-title { font-size: 54px; }
        .format-story .info-block { gap: 8px; margin-top: 10px; }
        .format-story .location { font-size: 16px; margin-top: 8px; }
        .format-story .dates { font-size: 44px; }
        .format-story .year-pill { font-size: 32px; padding: 6px 50px; margin-top: 10px; margin-bottom: 15px; }
        .format-story .showroom-info { font-size: 16px; min-width: 200px; padding-top: 12px; border-top-width: 2px; }
        .format-story .footer-logos { grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 10px; }
        .format-story .logo-wrapper { height: 30px; }


        /* --- 2. CONTROLES (ÁREA INFERIOR - FIJA EN ESTRUCTURA) --- */
        /* CAMBIO CLAVE: Ya no es 'position: fixed', es un bloque Flex sólido */
        .controls-area {
            position: relative; 
            width: 100%;
            flex-shrink: 0; /* No se encoge, mantiene su altura */
            
            background: var(--ui-bg); 
            border-top: 1px solid var(--ui-border);
            
            padding: 15px;
            /* Soporte para iPhone X/11/12+ Home Bar */
            padding-bottom: calc(15px + env(safe-area-inset-bottom));
            
            display: flex; justify-content: center;
            z-index: 2000;
        }

        .controls-grid { 
            display: flex; 
            gap: 10px; 
            align-items: center;
            width: 100%;
            max-width: 500px;
            justify-content: center;
        }
        
        .btn {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--ui-border);
            color: var(--ui-text);
            height: 50px;
            padding: 0 20px;
            border-radius: 8px;
            
            font-family: var(--font-main); 
            font-size: 11px; 
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            
            cursor: pointer; 
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            gap: 5px;
            flex: 1; /* Distribuye espacio igual en móviles */
            
            transition: background 0.2s, transform 0.1s;
        }
        
        .btn:active { transform: scale(0.96); background: rgba(255,255,255,0.15); }
        .btn svg { width: 20px; height: 20px; fill: currentColor; }
        
        /* Botón central destacado */
        .btn.btn-main {
            background: rgba(232, 50, 52, 0.15); /* Tintado rojo sutil */
            border-color: var(--accent);
            flex: 1.5; /* Un poco más ancho */
        }


        /* --- IMPRESIÓN (PDF) --- */
        @media print {
            body { 
                display: block; /* Volver a block para imprimir */
                background: none; 
                margin: 0; padding: 0; height: auto; 
            }
            .stage-container, .controls-area { display: none !important; }

            /* Cartel a pantalla completa sin margen */
            #poster { 
                display: flex !important;
                position: absolute !important; 
                top: 0 !important; left: 0 !important;
                margin: 0 !important; 
                transform: none !important; 
                width: 100% !important; 
                height: 100% !important;
                box-shadow: none !important; border: none !important;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                page-break-inside: avoid;
            }
            .logo-wrapper img { max-height: 100%; max-width: 100%; }
        }

    </style>
</head>
<body>

    <!-- BLOQUE 1: STAGE SUPERIOR (FLEXIBLE) -->
    <div class="stage-container" id="stage">
        <div id="poster">
            
            <!-- TRAMA DE FONDO -->
            <div class="bg-pattern"></div>

            <!-- LOGO SUPERIOR -->
            <div class="top-brand">
                <img id="logoImg" src="logo-ceramica-experience-negro.png" alt="Ceramica Experience">
            </div>

            <!-- CONTENIDO CENTRAL -->
            <div class="main-content">
                <div class="title-group">
                    <div class="intro-text">V EXPOSICIÓN DE</div>
                    <h1 class="main-title">SOLUCIONES<br>Y TENDENCIAS<br>CERÁMICAS</h1>
                </div>
                
                <div class="info-block">
                    <div class="location">Vila-real, Onda, Alcora</div>
                    <div class="dates">23–27 FEB</div>
                    <div class="year-pill">2026</div>
                    <div class="showroom-info">SHOWROOMS<br>GRUPO PAMESA</div>
                </div>
            </div>

            <!-- FOOTER LOGOS -->
            <div class="footer-logos">
                <div class="logo-wrapper"><img src="images/logos/pamesa.svg" alt="Pamesa"></div>
                <div class="logo-wrapper"><img src="images/logos/geotiles.svg" alt="Geotiles"></div>
                <div class="logo-wrapper"><img src="images/logos/ecoceramic.png" alt="Ecoceramic"></div>
                <div class="logo-wrapper"><img src="images/logos/prissmacer.svg" alt="Prissmacer"></div>
                <div class="logo-wrapper"><img src="images/logos/navarti.svg" alt="Navarti"></div>
                <div class="logo-wrapper"><img src="images/logos/tau-ceramica.svg" alt="Tau"></div>
                <div class="logo-wrapper logo-ascale"><img src="images/logos/ASCALE LOGO 2024 blanco.png" alt="Ascale"></div>
                <div class="logo-wrapper logo-natucer"><img src="images/logos/Natucer.svg" alt="Natucer"></div>
            </div>
        </div>
    </div>

    <!-- BLOQUE 2: CONTROLES INFERIORES (FÍSICOS, NO FLOTANTES) -->
    <div class="controls-area">
        <div class="controls-grid">
            <!-- Botón Color -->
            <button class="btn" onclick="System.nextColor()">
                <svg viewBox="0 0 24 24"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path></svg>
                Color
            </button>
            
            <!-- Botón Formato -->
            <button class="btn btn-main" onclick="System.nextFormat()">
                <svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                <span id="btnFormatText">Totem XL</span>
            </button>
            
            <!-- Botón PDF -->
            <button class="btn" onclick="System.printPDF()">
                <svg viewBox="0 0 24 24"><path d="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5V11H19v2h-1.5V7h3v1.5zM9 9.5h1v-1H9v1zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm10 5.5h1v-3h-1v3z"/></svg>
                PDF
            </button>
        </div>
    </div>

    <script>
        const System = {
            // Paletas
            palettes: [
                { bg: '#F4F4F4', fg: '#111111', accent: '#E83234', textAccent: '#FFFFFF', logo: 'negro' },
                { bg: '#111111', fg: '#FFFFFF', accent: '#FFFFFF', textAccent: '#000000', logo: 'blanco' },
                { bg: '#E83234', fg: '#FFFFFF', accent: '#000000', textAccent: '#FFFFFF', logo: 'blanco' },
                { bg: '#1F3EAC', fg: '#FFFFFF', accent: '#61CE70', textAccent: '#000000', logo: 'blanco' },
                { bg: '#ebc4c6', fg: '#013765', accent: '#E83234', textAccent: '#FFFFFF', logo: 'negro' },
                { bg: '#CCFF00', fg: '#000000', accent: '#000000', textAccent: '#CCFF00', logo: 'negro' },
                { bg: '#46495A', fg: '#FFFFFF', accent: '#E83234', textAccent: '#FFFFFF', logo: 'blanco' },
                { bg: 'linear-gradient(180deg, #1F3EAC 0%, #00152e 100%)', fg: '#FFFFFF', accent: '#61CE70', textAccent: '#000000', logo: 'blanco' }
            ],
            
            // Formatos
            formats: [
                { w: 800, h: 2800, mmW: 1200, mmH: 4200, name: 'Totem XL', class: 'format-xl' },
                { w: 800, h: 1131, mmW: 210, mmH: 297, name: 'A4 Poster', class: 'format-a4' },
                { w: 600, h: 1066, mmW: 1080, mmH: 1920, name: 'Story 9:16', class: 'format-story' }
            ],

            state: { p: 0, f: 0 },

            init: function() {
                this.render();
                window.addEventListener('resize', () => this.fitPoster());
                setTimeout(() => this.fitPoster(), 50);
            },

            // AJUSTE DE ESCALA AUTOMÁTICO
            fitPoster: function() {
                const poster = document.getElementById('poster');
                const stage = document.getElementById('stage');
                const format = this.formats[this.state.f];
                
                // stage.clientHeight ahora es la altura RESTANTE (pantalla - controles)
                // Esto garantiza que el cartel nunca se meta debajo de los controles.
                const availableW = stage.clientWidth - 40; // 40px padding
                const availableH = stage.clientHeight - 40; 

                const scale = Math.min(
                    availableW / format.w, 
                    availableH / format.h
                );
                
                poster.style.transform = `scale(${Math.min(scale, 1)})`;
            },

            nextColor: function() { 
                this.state.p = (this.state.p + 1) % this.palettes.length; 
                this.render(); 
            },

            nextFormat: function() {
                this.state.f = (this.state.f + 1) % this.formats.length;
                this.render();
            },

            render: function() {
                const p = this.palettes[this.state.p];
                const f = this.formats[this.state.f];
                const poster = document.getElementById('poster');
                
                document.getElementById('btnFormatText').innerText = f.name;

                poster.className = f.class;
                poster.style.setProperty('--bg', p.bg);
                poster.style.setProperty('--fg', p.fg);
                poster.style.setProperty('--accent', p.accent);
                poster.style.setProperty('--text-on-accent', p.textAccent);
                poster.style.setProperty('--w', f.w + 'px');
                poster.style.setProperty('--h', f.h + 'px');

                const isDark = (p.fg === '#FFFFFF');
                poster.style.setProperty('--line', isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)');

                const logoName = p.logo === 'blanco' ? 'logo-ceramica-experience-blanco.png' : 'logo-ceramica-experience-negro.png';
                document.getElementById('logoImg').src = logoName;

                const footerFilter = p.logo === 'blanco' ? 'grayscale(100%) brightness(0) invert(1)' : 'grayscale(100%) brightness(0)';
                poster.style.setProperty('--logo-filter', footerFilter);

                this.updatePrintPageSize(f.mmW, f.mmH);
                this.fitPoster();
            },

            updatePrintPageSize: function(mmW, mmH) {
                let style = document.getElementById('dynamic-print-style');
                if (!style) {
                    style = document.createElement('style');
                    style.id = 'dynamic-print-style';
                    document.head.appendChild(style);
                }
                style.innerHTML = `@media print { @page { size: ${mmW}mm ${mmH}mm; margin: 0; } body { margin: 0; } }`;
            },

            printPDF: function() {
                const poster = document.getElementById('poster');
                poster.style.display = 'none';
                setTimeout(() => {
                    poster.style.display = 'flex';
                    window.print();
                }, 50);
            }
        };

        window.onload = () => System.init();
    </script>
</body>
</html>